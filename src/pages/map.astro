---
import Layout from "../layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import VantaHero from "../components/VantaHero.astro";

// SEO metadata
const title = "Tapio Network Map | Finntegrate";
const description =
  "Explore the Tapio agent network - how Finnish mythology-inspired guides connect immigrant needs with Finnish organizations and services.";
const keywords =
  "Tapio network, Finland immigration, Finntegrate, immigration services, Finnish organizations, integration services";
---

<Layout title={title} description={description} keywords={keywords}>
  <!-- Hero Section -->
  <VantaHero height="default">
    <h1
      id="hero-heading"
      class="text-4xl md:text-5xl lg:text-6xl font-bold text-white drop-shadow-md"
    >
      The Tapio Network
    </h1>
    <p class="py-6 text-xl md:text-2xl text-white/90 drop-shadow-md">
      How our Finnish mythology-inspired agents connect immigrants with the
      resources they need
    </p>
    <div class="flex flex-wrap justify-center gap-4">
      <a href="#network-visualization" class="btn btn-primary">
        Explore the Network
      </a>
      <a
        href="/tapio"
        class="btn btn-outline btn-secondary bg-white/10 text-white border-white hover:bg-white hover:text-primary"
      >
        Learn About Tapio
      </a>
    </div>
  </VantaHero>

  <!-- Introduction Section -->
  <section id="introduction" class="py-16 bg-base-100 bg-opacity-90">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold">Bridging Needs and Resources</h2>
        <p class="text-xl text-base-content/70 max-w-3xl mx-auto mt-4">
          The Finnish immigration system involves many different organizations
          and processes. Tapio helps you navigate this complex network through
          specialized guides.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex flex-col items-center">
              <div
                class="w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mb-3"
              >
                <Icon
                  name="mdi:pine-tree"
                  class="h-8 w-8 text-blue-500"
                  aria-hidden="true"
                />
              </div>
              <h3 class="text-lg font-semibold text-center">Tapio Agents</h3>
              <p class="text-center text-base-content/70 mt-2">
                Specialized guides named after figures from Finnish mythology,
                each with expertise in different aspects of immigration
              </p>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex flex-col items-center">
              <div
                class="w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mb-3"
              >
                <Icon
                  name="mdi:office-building"
                  class="h-8 w-8 text-green-500"
                  aria-hidden="true"
                />
              </div>
              <h3 class="text-lg font-semibold text-center">
                Finnish Organizations
              </h3>
              <p class="text-center text-base-content/70 mt-2">
                Government agencies and service providers like Migri, Kela, TE
                Services, and municipalities
              </p>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex flex-col items-center">
              <div
                class="w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mb-3"
              >
                <Icon
                  name="mdi:account-question"
                  class="h-8 w-8 text-yellow-500"
                  aria-hidden="true"
                />
              </div>
              <h3 class="text-lg font-semibold text-center">Immigrant Needs</h3>
              <p class="text-center text-base-content/70 mt-2">
                Common tasks and challenges immigrants face when settling in
                Finland, from residence permits to healthcare access
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Network Visualization Section -->
  <section id="network-visualization" class="py-16">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold">The Tapio Agent Network</h2>
        <p class="text-xl text-base-content/70 max-w-3xl mx-auto mt-4">
          Explore how Tapio agents connect immigrant needs with Finnish
          organizations and services
        </p>
      </div>

      <div class="card bg-base-100 shadow-lg my-8">
        <div class="card-body">
          <h3 class="card-title text-xl font-bold mb-4">
            Tapio Network: Connecting Immigrant Needs to Finnish Resources
          </h3>

          <div class="mb-4 grid grid-cols-3 gap-4">
            <div class="flex items-center">
              <div class="w-4 h-4 rounded-full bg-blue-500 mr-2"></div>
              <span class="text-sm">Tapio Agents</span>
            </div>
            <div class="flex items-center">
              <div class="w-4 h-4 rounded-full bg-green-500 mr-2"></div>
              <span class="text-sm">Finnish Organizations</span>
            </div>
            <div class="flex items-center">
              <div class="w-4 h-4 rounded-full bg-yellow-500 mr-2"></div>
              <span class="text-sm">Immigrant Needs</span>
            </div>
          </div>

          <div class="relative w-full">
            <div
              id="sigma-container"
              class="w-full bg-gray-50 rounded-lg border border-gray-200"
              style="height: 500px;"
              tabindex="0"
              role="img"
              aria-label="Interactive network visualization of the Tapio agent network"
            >
            </div>

            <!-- Node info panel will be populated with JavaScript -->
            <div
              id="node-info-panel"
              class="node-info-panel"
              aria-live="polite"
            >
              <!-- Content will be dynamically inserted here -->
            </div>
          </div>

          <div class="flex justify-center mt-4">
            <button
              id="animate-button"
              class="btn btn-primary btn-sm"
              aria-label="Animate the network visualization"
            >
              Animate Network
            </button>
          </div>

          <p class="text-sm text-base-content/70 mt-4 text-center">
            This visualization shows how Tapio agents connect immigrant needs
            with relevant Finnish organizations and services.
            <br />Hover over nodes to see details and click the button to
            animate the network relationships.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Agent Examples -->
  <section id="agent-examples" class="py-16 bg-base-100 bg-opacity-90">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold">Examples of Tapio at Work</h2>
        <p class="text-xl text-base-content/70 max-w-3xl mx-auto mt-4">
          How our specialized agents help connect immigrants with the right
          services
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
        <!-- Example 1 -->
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex gap-4 items-start">
              <div
                class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0"
              >
                <Icon
                  name="mdi:hammer"
                  class="h-6 w-6 text-primary"
                  aria-hidden="true"
                />
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-2">
                  Residence Permit Guidance
                </h3>
                <p class="text-sm text-base-content/90 mb-2">
                  <span class="font-semibold">Ilmarinen</span> helps with:
                </p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                  <li>Finding the right permit type for your situation</li>
                  <li>Understanding required documents and procedures</li>
                  <li>Connecting you with Migri and DVV resources</li>
                  <li>Explaining registration steps after permit approval</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Example 2 -->
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex gap-4 items-start">
              <div
                class="w-12 h-12 rounded-full bg-secondary/20 flex items-center justify-center flex-shrink-0"
              >
                <Icon
                  name="mdi:cash-multiple"
                  class="h-6 w-6 text-secondary"
                  aria-hidden="true"
                />
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-2">Finding Employment</h3>
                <p class="text-sm text-base-content/90 mb-2">
                  <span class="font-semibold">Sampo</span> helps with:
                </p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                  <li>Job search resources and platforms</li>
                  <li>CV and application practices in Finland</li>
                  <li>Connecting with TE Services for assistance</li>
                  <li>Understanding taxation and employment rights</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Example 3 -->
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex gap-4 items-start">
              <div
                class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0"
              >
                <Icon
                  name="mdi:tree"
                  class="h-6 w-6 text-accent"
                  aria-hidden="true"
                />
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-2">
                  Social Benefits Navigation
                </h3>
                <p class="text-sm text-base-content/90 mb-2">
                  <span class="font-semibold">Rauni</span> helps with:
                </p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                  <li>Understanding eligibility for Kela benefits</li>
                  <li>Explaining family support systems</li>
                  <li>Finding information about housing allowances</li>
                  <li>Clarifying social security coverage options</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Example 4 -->
        <div class="card bg-base-100 shadow-sm">
          <div class="card-body">
            <div class="flex gap-4 items-start">
              <div
                class="w-12 h-12 rounded-full bg-info/20 flex items-center justify-center flex-shrink-0"
              >
                <Icon
                  name="mdi:book-open-variant"
                  class="h-6 w-6 text-info"
                  aria-hidden="true"
                />
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-2">Language Learning</h3>
                <p class="text-sm text-base-content/90 mb-2">
                  <span class="font-semibold">Agricola</span> helps with:
                </p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                  <li>Finding suitable Finnish language courses</li>
                  <li>Self-study resources and tools</li>
                  <li>Language practice opportunities</li>
                  <li>Understanding language requirements for services</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section
    id="cta"
    class="py-16 bg-gradient-to-br from-primary to-secondary text-white"
  >
    <div class="hero">
      <div class="hero-content text-center">
        <div class="max-w-md">
          <h2 class="text-3xl font-bold">See Tapio in Action</h2>
          <p class="py-6 text-xl">
            Experience how our network of Finnish mythology-inspired guides can
            help make your transition to Finland smoother.
          </p>

          <div class="card bg-base-100 bg-opacity-10 backdrop-blur-sm">
            <div class="card-body">
              <h3 class="card-title justify-center">Get Involved</h3>
              <div class="grid sm:grid-cols-2 gap-4">
                <a
                  href="https://tapio.finntegrate.org"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn btn-outline btn-primary bg-white"
                >
                  <Icon
                    name="mdi:chat"
                    class="h-5 w-5 mr-1"
                    aria-hidden="true"
                  />
                  Try Tapio Chat
                </a>
                <a
                  href="https://github.com/finntegrate/tapio"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn btn-outline btn-secondary bg-white"
                >
                  <Icon
                    name="mdi:github"
                    class="h-5 w-5 mr-1"
                    aria-hidden="true"
                  />
                  View on GitHub
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Import the tapio network graph script -->
  <script>
    import "../scripts/tapio-network-graph.js";
  </script>

  <!-- Add CSS for network visualization hover effects -->
  <style>
    /* Enhance the network visualization with better hover states */
    #sigma-container {
      position: relative;
      transition: all 0.2s ease;
    }

    /* Add accessibility improvements */
    #sigma-container:focus-visible {
      outline: 3px solid var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }

    /* Improve information panel styling */
    .node-info-panel {
      position: absolute;
      background-color: white;
      border-radius: 4px;
      padding: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      max-width: 250px;
      pointer-events: none;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .node-info-panel.visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</Layout>
